local _, ns = ...local B, C, L, DB = unpack(ns)local module = B:GetModule("Chat")function module:ChatCopy()	-- Custom ChatMenu	local menu = CreateFrame("Frame", "CustomChatMenu", UIParent)	menu:SetSize(25, 100)	menu:SetPoint("BOTTOMLEFT", ChatFrame1Tab, "TOPLEFT", 0, 10)	menu:SetShown(NDuiDB["Chat"]["ChatMenu"])	QuickJoinToastButton:Hide()	ChatFrameMenuButton:ClearAllPoints()	ChatFrameMenuButton:SetPoint("TOP", menu)	ChatFrameMenuButton:SetParent(menu)	ChatFrameChannelButton:ClearAllPoints()	ChatFrameChannelButton:SetPoint("TOP", ChatFrameMenuButton, "BOTTOM", 0, -2)	ChatFrameChannelButton:SetParent(menu)	ChatFrameToggleVoiceDeafenButton:SetParent(menu)	ChatFrameToggleVoiceMuteButton:SetParent(menu)	ChatAlertFrame:ClearAllPoints()	ChatAlertFrame:SetPoint("BOTTOMLEFT", ChatFrame1Tab, "TOPLEFT", 5, 25)	-- Chat Copy	local lines = {}	local frame = CreateFrame("Frame", "NDuiChatCopy", UIParent)	frame:SetPoint("CENTER")	frame:SetSize(700, 400)	frame:Hide()	frame:SetFrameStrata("DIALOG")	B.CreateMF(frame)	B.CreateBD(frame)	frame.close = CreateFrame("Button", nil, frame, "UIPanelCloseButton")	frame.close:SetPoint("TOPRIGHT", frame, "TOPRIGHT")	local scrollArea = CreateFrame("ScrollFrame", "ChatCopyScrollFrame", frame, "UIPanelScrollFrameTemplate")	scrollArea:SetPoint("TOPLEFT", frame, "TOPLEFT", 10, -30)	scrollArea:SetPoint("BOTTOMRIGHT", frame, "BOTTOMRIGHT", -30, 10)	local editBox = CreateFrame("EditBox", nil, frame)	editBox:SetMultiLine(true)	editBox:SetMaxLetters(99999)	editBox:EnableMouse(true)	editBox:SetAutoFocus(false)	editBox:SetFontObject(ChatFontNormal)	editBox:SetWidth(scrollArea:GetWidth())	editBox:SetHeight(270)	editBox:SetScript("OnEscapePressed", function(f) f:GetParent():GetParent():Hide() f:SetText("") end)	scrollArea:SetScrollChild(editBox)	local function copyFunc(_, btn)		if not frame:IsShown() then			local cf = SELECTED_DOCK_FRAME			local _, size = cf:GetFont()			FCF_SetChatWindowFontSize(cf, cf, .01)			frame:Show()			local ct = 1			for i = 1, cf:GetNumMessages() do				local message = cf:GetMessageInfo(i)				lines[ct] = tostring(message)				ct = ct + 1			end			local lineCt = ct - 1			local text = table.concat(lines, "\n", 1, lineCt)			FCF_SetChatWindowFontSize(cf, cf, size)			editBox:SetText(text)			wipe(lines)		else			frame:Hide()		end	end	local function hintFunc(self)		B.AddTooltip(self, "ANCHOR_TOP", L["Chat Copy"], "class")	end	for i = 1, 10 do		local tab = _G[format("%s%d%s", "ChatFrame", i, "Tab")]		tab:SetScript("OnDoubleClick", copyFunc)		tab:SetScript("OnEnter", hintFunc)	end	-- Aurora Reskin	if IsAddOnLoaded("AuroraClassic") then		local F = unpack(AuroraClassic)		F.ReskinClose(frame.close)		F.ReskinScroll(ChatCopyScrollFrameScrollBar)	endend